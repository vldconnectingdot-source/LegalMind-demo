<!-- Banner de acceso temporal -->
<div style="background-color:#004aad;color:white;padding:10px;text-align:center;font-size:16px;">
üöÄ Acceso de prueba activo por 3 d√≠as ¬∑ Despu√©s de este tiempo, deje sus comentarios abajo
</div>

<!-- Script para control de expiraci√≥n -->
<script>
(function(){
    const trialDays = 3;
    let startDate = localStorage.getItem("trialStartDate");
    if (!startDate) {
        startDate = new Date().toISOString();
        localStorage.setItem("trialStartDate", startDate);
    }
    const expirationDate = new Date(startDate);
    expirationDate.setDate(expirationDate.getDate() + trialDays);

    if (new Date() > expirationDate) {
        document.body.innerHTML = "<h2>‚è≥ El periodo de prueba ha terminado</h2><p>Por favor deje sus comentarios abajo:</p>" +
                                  "<textarea style='width:90%;height:100px;'></textarea><br><button onclick='alert(\"Gracias por sus comentarios\")'>Enviar</button>";
    }
})();
</script>
<div style="background-color:#004aad;color:white;padding:15px;text-align:center;font-size:18px;font-weight:bold;">
  üöÄ Acceso de prueba activo por 3 d√≠as ¬∑ Despu√©s podr√°s enviarnos tus comentarios
</div>

<!-- Script para control de expiraci√≥n -->
<script>
(function(){
  const startDate = localStorage.getItem("trialStartDate") || new Date().toISOString();
  localStorage.setItem("trialStartDate", startDate);

  const trialDays = 3;
  const expirationDate = new Date(startDate);
  expirationDate.setDate(expirationDate.getDate() + trialDays);

  const now = new Date();
  if(now > expirationDate){
    document.body.innerHTML = "<h1 style='text-align:center;margin-top:50px;color:red;'>El periodo de prueba ha finalizado. ¬°Gracias por probar LegalMind AI!</h1>";
  }
})();
</script>

<!-- Formulario de comentarios -->
<div style="max-width:500px;margin:30px auto;padding:20px;border:1px solid #ccc;border-radius:8px;">
  <h3 style="text-align:center;">Env√≠anos tus comentarios</h3>
  <form action="mailto:vldconnectingdot@gmail.com" method="POST" enctype="text/plain">
    <textarea name="Comentarios" rows="5" style="width:100%;padding:10px;border-radius:5px;border:1px solid #aaa;" placeholder="Escribe aqu√≠ tus comentarios..."></textarea><br><br>
    <input type="submit" value="Enviar" style="width:100%;background-color:#004aad;color:white;padding:10px;border:none;border-radius:5px;font-size:16px;cursor:pointer;">
  </form>
</div>
<html lang="es">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>LegalMind AI - Demo Segura</title>
  <style>
    body {
      font-family: Arial, sans-serif;
      margin: 0;
      padding: 0;
      background-color: #f4f4f4;
    }
    .wrap {
      max-width: 800px;
      margin: auto;
      padding: 20px;
    }
    .card {
      background: white;
      padding: 20px;
      border-radius: 10px;
      box-shadow: 0 2px 5px rgba(0,0,0,0.1);
    }
    .muted { color: #777; }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="card">
      <h1>LegalMind AI - Demo</h1>
      <p class="muted">Ingrese la contrase√±a NDA para acceder.</p>
      <input type="password" id="nda" placeholder="Contrase√±a NDA">
      <button onclick="checkNDA()">Acceder</button>
      <p id="error" class="muted"></p>
    </div>
  </div>

<script>
  const TOKEN = "01K2MET1A9KG860CAN9YHF41P4";
  const NDA_PASS = "0000";
  const TTL_HOURS = 720; // 30 d√≠as
  const FIRST_ACCESS_KEY = "first_access_time";

  function checkNDA() {
    const pass = document.getElementById("nda").value;
    if (pass === NDA_PASS) {
      const now = Date.now();
      if (!localStorage.getItem(FIRST_ACCESS_KEY)) {
        localStorage.setItem(FIRST_ACCESS_KEY, now);
      }
      const firstAccess = parseInt(localStorage.getItem(FIRST_ACCESS_KEY));
      const elapsedHours = (now - firstAccess) / (1000 * 60 * 60);
      if (elapsedHours <= TTL_HOURS) {
        window.location.href = `app.html?t=${TOKEN}`;
      } else {
        document.getElementById("error").textContent = "El enlace ha caducado.";
      }
    } else {
      document.getElementById("error").textContent = "Contrase√±a incorrecta.";
    }
  }
</script>

</body>
</html>
  // === CONFIGURACI√ìN ===
  const TOKEN = "01K2MET1A9KG860CAN9YHF41P4"; // token en la URL ?t=...
  const PASS  = "0000";                        // contrase√±a NDA
  const TTL_HOURS = 2;                         // duraci√≥n: 2 horas DESDE EL PRIMER ACCESO

  // === GATE PRINCIPAL ===
  const now = () => new Date();
  function hasValidToken() {
    const t = new URL(location.href).searchParams.get('t');
    return t === TOKEN;
  }

  function getFirstOpen() {
    try { return localStorage.getItem('lma_first_open'); } catch { return null; }
  }
  function setFirstOpen() {
    try { localStorage.setItem('lma_first_open', new Date().toISOString()); } catch {}
  }
  function isExpired() {
    const first = getFirstOpen();
    if (!first) return false;
    const start = new Date(first).getTime();
    const end = start + TTL_HOURS * 60 * 60 * 1000;
    return Date.now() > end;
  }
  function expiryText() {
    const first = getFirstOpen();
    if (!first) return `2 horas a partir del primer acceso`;
    const end = new Date(new Date(first).getTime() + TTL_HOURS * 60 * 60 * 1000);
    return `${end.toLocaleString('es-MX', {hour12:false})} (CDMX)`;
  }

  function guard() {
    if (!hasValidToken()) {
      document.body.innerHTML = `
        <div class="wrap"><div class="card">
          <h1>Acceso restringido</h1>
          <p class="muted">Token inv√°lido o ausente. Usa la liga con <code>?t=${TOKEN}</code>.</p>
        </div></div>`;
      return false;
    }
    if (isExpired()) {
      document.body.innerHTML = `
        <div class="wrap"><div class="card">
          <h1>Acceso vencido</h1>
          <p class="muted">La demo caduc√≥ a las 2 horas del primer acceso. Solicita un nuevo enlace.</p>
        </div></div>`;
      return false;
    }
    if (!getFirstOpen()) setFirstOpen();
    document.getElementById('ndaModal').style.display = 'flex';
    const exp = document.getElementById('expiry');
    if (exp) exp.textContent = expiryText();
    return true;
  }

  // === ANTI-COPIA ===
  addEventListener('contextmenu', e => e.preventDefault());
  addEventListener('keydown', e => {
    const k = e.key.toLowerCase(), ctrl = e.ctrlKey || e.metaKey;
    if ((ctrl && (k==='c'||k==='x'||k==='v'||k==='a'||k==='s'||k==='u'||k==='i'||k==='j')) || e.keyCode===123) {
      e.preventDefault(); e.stopPropagation();
    }
  }, true);
  addEventListener('dragstart', e => e.preventDefault());
  addEventListener('copy', e => e.preventDefault());
  addEventListener('cut', e => e.preventDefault());
  addEventListener('selectstart', e => e.preventDefault());
  (function devtoolsTrap(){
    const thr = 160;
    setInterval(() => {
      if ((outerWidth - innerWidth > thr) || (outerHeight - innerHeight > thr)) {
        document.body.innerHTML = `
          <div class="wrap"><div class="card">
            <h1>Modo restringido</h1>
            <p class="muted">Cierra las herramientas de desarrollador para continuar.</p>
          </div></div>`;
      }
    }, 1500);
  })();

  // === NDA ===
  function checkPass() {
    const ok = (document.getElementById('pass').value.trim() === PASS);
    const cb = document.getElementById('ndaok').checked;
    document.getElementById('enter').disabled = !(ok && cb);
  }
  function enterDemo() {
    document.getElementById('ndaModal').style.display = 'none';
    document.getElementById('app').style.display = 'block';
    const exp = document.getElementById('expiry');
    if (exp) exp.textContent = expiryText();
  }

  window.guard = guard;
  window.checkPass = checkPass;
  window.enterDemo = enterDemo;
</script>
  // === CONFIGURACI√ìN ===
  const TOKEN = "01K2MET1A9KG860CAN9YHF41P4"; // token en la URL ?t=...
  const PASS  = "0000";                        // contrase√±a NDA
  const TTL_HOURS = 2;                         // duraci√≥n: 2 horas DESDE EL PRIMER ACCESO

  // === GATE PRINCIPAL ===
  const now = () => new Date();
  function hasValidToken() {
    const t = new URL(location.href).searchParams.get('t');
    return t === TOKEN;
  }

  // Guardamos el primer acceso en el navegador del visitante
  function getFirstOpen() {
    try { return localStorage.getItem('lma_first_open'); } catch { return null; }
  }
  function setFirstOpen() {
    try { localStorage.setItem('lma_first_open', new Date().toISOString()); } catch {}
  }
  function isExpired() {
    const first = getFirstOpen();
    if (!first) return false; // si a√∫n no se ha abierto, no expira
    const start = new Date(first).getTime();
    const end = start + TTL_HOURS * 60 * 60 * 1000;
    return Date.now() > end;
  }
  function expiryText() {
    const first = getFirstOpen();
    if (!first) return `2 horas a partir del primer acceso`;
    const end = new Date(new Date(first).getTime() + TTL_HOURS * 60 * 60 * 1000);
    return `${end.toLocaleString('es-MX', {hour12:false})} (CDMX)`;
  }

  function guard() {
    if (!hasValidToken()) {
      document.body.innerHTML = `
        <div class="wrap"><div class="card">
          <h1>Acceso restringido</h1>
          <p class="muted">Token inv√°lido o ausente. Usa la liga con <code>?t=${TOKEN}</code>.</p>
        </div></div>`;
      return false;
    }
    if (isExpired()) {
      document.body.innerHTML = `
        <div class="wrap"><div class="card">
          <h1>Acceso vencido</h1>
          <p class="muted">La demo caduc√≥ a las 2 horas del primer acceso. Solicita un nuevo enlace.</p>
        </div></div>`;
      return false;
    }
    // Si no hay ‚Äúprimer acceso‚Äù, registrarlo en cuanto cargue
    if (!getFirstOpen()) setFirstOpen();
    // Mostrar modal de NDA
    document.getElementById('ndaModal').style.display = 'flex';
    // Mostrar fecha/hora de caducidad en la UI si existe el span
    const exp = document.getElementById('expiry');
    if (exp) exp.textContent = expiryText();
    return true;
  }

  // === ANTI-COPIA / INSPECCI√ìN (disuasorio) ===
  addEventListener('contextmenu', e => e.preventDefault());
  addEventListener('keydown', e => {
    const k = e.key.toLowerCase(), ctrl = e.ctrlKey || e.metaKey;
    if ((ctrl && (k==='c'||k==='x'||k==='v'||k==='a'||k==='s'||k==='u'||k==='i'||k==='j')) || e.keyCode===123) {
      e.preventDefault(); e.stopPropagation();
    }
  }, true);
  addEventListener('dragstart', e => e.preventDefault());
  addEventListener('copy', e => e.preventDefault());
  addEventListener('cut', e => e.preventDefault());
  addEventListener('selectstart', e => e.preventDefault());
  (function devtoolsTrap(){
    const thr = 160;
    setInterval(() => {
      if ((outerWidth - innerWidth > thr) || (outerHeight - innerHeight > thr)) {
        document.body.innerHTML = `
          <div class="wrap"><div class="card">
            <h1>Modo restringido</h1>
            <p class="muted">Cierra las herramientas de desarrollador para continuar.</p>
          </div></div>`;
      }
    }, 1500);
  })();

  // === NDA ===
  function checkPass() {
    const ok = (document.getElementById('pass').value.trim() === PASS);
    const cb = document.getElementById('ndaok').checked;
    document.getElementById('enter').disabled = !(ok && cb);
  }
  function enterDemo() {
    document.getElementById('ndaModal').style.display = 'none';
    document.getElementById('app').style.display = 'block';
    const exp = document.getElementById('expiry');
    if (exp) exp.textContent = expiryText();
  }

  // Exponer funciones si tu HTML ya las usa en los botones
  window.guard = guard;
  window.checkPass = checkPass;
  window.enterDemo = enterDemo;
</script>
<html lang="es">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>LegalMind AI ‚Äî Demo Segura (GitHub Pages)</title>
<meta http-equiv="Content-Security-Policy" content="default-src 'self'; img-src 'self' data:; style-src 'self' 'unsafe-inline'; script-src 'self' 'unsafe-inline'; base-uri 'none'; object-src 'none'; frame-ancestors 'none'">
<style>
  :root {
    --bg: #0B0F19; --fg: #fff; --muted:#9AA3B2; --primary:#0A39FF; --accent:#D4AF37; --danger:#FF4D4F;
  }
  html, body { margin:0; background:var(--bg); color:var(--fg); font-family:ui-sans-serif,system-ui,-apple-system,Segoe UI,Roboto,Arial; user-select:none; }
  .wrap { max-width:980px; margin:0 auto; padding:24px; }
  .card { background:rgba(255,255,255,0.03); border:1px solid rgba(255,255,255,0.1); border-radius:16px; padding:24px; }
  .grid { display:grid; grid-template-columns: repeat(3, 1fr); gap:12px; }
  .item { background:rgba(255,255,255,0.04); border:1px solid rgba(255,255,255,0.08); border-radius:12px; padding:12px; min-height:72px; }
  .row { display:flex; gap:12px; flex-wrap:wrap; align-items:center; }
  .btn { padding:10px 14px; border-radius:10px; background:linear-gradient(90deg,var(--primary),var(--accent)); color:#000; border:none; font-weight:700; cursor:pointer; }
  .btn.ghost { background:transparent; color:#fff; border:1px solid rgba(255,255,255,0.2); }
  .muted { color:var(--muted); font-size:12px; }
  .notice { border-left:4px solid var(--danger); padding:12px; background:rgba(255,77,79,0.06); border-radius:8px; }
  .watermark { position:fixed; inset:0; pointer-events:none; background-image:repeating-linear-gradient(45deg, rgba(212,175,55,0.08) 0, rgba(212,175,55,0.08) 2px, transparent 2px, transparent 24px); mix-blend-mode: overlay; }
  input[type="password"] { width:100%; padding:10px; border-radius:8px; border:1px solid rgba(255,255,255,0.2); background:rgba(255,255,255,0.04); color:#fff; }
  .modal { position: fixed; inset:0; display:none; align-items:center; justify-content:center; background:rgba(0,0,0,0.6); }
  .modal .box { width:min(680px,92vw); background:#0E1422; border:1px solid rgba(255,255,255,0.12); border-radius:14px; padding:18px; }
</style>
<script>
  const EXPIRES_AT="2025-09-14T23:59:59-06:00";
  const TOKEN="01K2MET1A9KG860CAN9YHF41P4";
  const PASS="0000";
  const now=()=>new Date();
  function isExpired() { return now() > new Date(EXPIRES_AT); }
  function hasValidToken() { const t=new URL(location.href).searchParams.get('t'); return t===TOKEN; }
  function guard() {
    if (isExpired()) { document.body.innerHTML='<div class="wrap"><div class="card"><h1>Acceso vencido</h1><p class="muted">Solicita un nuevo enlace al equipo LegalMind AI.</p></div></div>'; return false; }
    if (!hasValidToken()) { document.body.innerHTML='<div class="wrap"><div class="card"><h1>Acceso restringido</h1><p class="muted">Token inv√°lido o ausente.</p></div></div>'; return false; }
    document.getElementById('ndaModal').style.display='flex'; return true;
  }
  // Anti-copia/inspecci√≥n (disuasorio)
  addEventListener('contextmenu', e=>e.preventDefault());
  addEventListener('keydown', e=>{
    const k=e.key.toLowerCase(), ctrl=e.ctrlKey||e.metaKey;
    if ((ctrl&&(k==='c'||k==='x'||k==='v'||k==='a'||k==='s'||k==='u'||k==='i'||k==='j')) || e.keyCode===123) { e.preventDefault(); e.stopPropagation(); }
  }, true);
  addEventListener('dragstart', e=>e.preventDefault());
  addEventListener('copy', e=>e.preventDefault());
  addEventListener('cut', e=>e.preventDefault());
  addEventListener('selectstart', e=>e.preventDefault());
  (function devtoolsTrap(){
    const thr=160; setInterval(()=>{
      if ((outerWidth-innerWidth>thr)||(outerHeight-innerHeight>thr)) document.body.innerHTML='<div class="wrap"><div class="card"><h1>Modo restringido</h1><p class="muted">Cierra herramientas de desarrollador para continuar.</p></div></div>';
    }, 1500);
  })();
  function checkPass(){ const ok=(document.getElementById('pass').value.trim()===PASS); const cb=document.getElementById('ndaok').checked; document.getElementById('enter').disabled=!(ok&&cb); }
  function enterDemo(){ document.getElementById('ndaModal').style.display='none'; document.getElementById('app').style.display='block'; }
</script>
</head>
<body onload="guard()">
<div class="watermark" aria-hidden="true"></div>

<div id="ndaModal" class="modal" role="dialog" aria-modal="true">
  <div class="box">
    <h2 style="margin:0 0 8px;">Acuerdo de Confidencialidad (NDA) ‚Äî Acceso a Demo</h2>
    <p class="muted" style="margin:0 0 12px;">Al acceder aceptas no copiar, descargar ni divulgar; uso exclusivo para evaluaci√≥n interna. Propiedad de D‚ÄôConnectingDot / LegalMind AI.</p>
    <label>Contrase√±a de acceso</label>
    <input id="pass" type="password" placeholder="‚Ä¢‚Ä¢‚Ä¢‚Ä¢" oninput="checkPass()" autocomplete="off" />
    <label><input id="ndaok" type="checkbox" onchange="checkPass()" /> Acepto el NDA y las restricciones.</label>
    <div class="row" style="margin-top:12px;">
      <button id="enter" class="btn" onclick="enterDemo()" disabled>Entrar a la demo</button>
      <button class="btn ghost" onclick="location.reload()">Cancelar</button>
    </div>
    <p class="muted" style="margin-top:8px;">Este acceso caduca el 2025-09-14 23:59:59 (CDMX) y requiere token en la URL.</p>
  </div>
</div>

<div id="app" class="wrap" style="display:none;">
  <div class="card">
    <h1>LegalMind AI ‚Äî Vista protegida</h1>
    <h2>M√≥dulos ampliados ‚Äî solo visualizaci√≥n</h2>
    <div class="grid" id="mods"></div>
    <div class="row" style="margin-top:12px;">
      <button class="btn" onclick="alert('Flujo demo: funciones cr√≠ticas deshabilitadas.')">Probar flujo guiado</button>
      <span class="muted">V√°lido hasta 2025-09-14 23:59:59 ¬∑ Token + NDA + Contrase√±a</span>
    </div>
    <div style="margin-top:16px;" class="notice">
      <b>Aviso:</b> Queda prohibida toda reproducci√≥n, captura o explotaci√≥n. Se registran accesos para auditor√≠a.
    </div>
  </div>
</div>

<script>
  const mods=[
    "Asistente Legal Conversacional",
    "Generaci√≥n de Contratos y Cl√°usulas",
    "Revisi√≥n de Riesgos y Cumplimiento (KYC/AML/PLD)",
    "Buscador Jur√≠dico con Fuentes Oficiales",
    "Gesti√≥n de Expedientes y Evidencia",
    "C√°lculo de Finiquitos y N√≥mina",
    "Alertas Regulatorias y Jurisprudencia",
    "Firma y Sellado de Tiempo",
    "Analytics de Desempe√±o y Ahorro",
    "Orquestaci√≥n de Tareas y Workflows (nuevo)",
    "Dashboard de Clientes & Embudos (nuevo)"
  ];
  const grid=document.getElementById('mods');
  mods.forEach(m=>{ const el=document.createElement('div'); el.className='item'; el.textContent="‚Ä¢ "+m; grid.appendChild(el); });
</script>
</body>
</html>
